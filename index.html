<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Performance Predictor - Complete</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Sora:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #0A84FF;
            --secondary: #FF375F;
            --tertiary: #30D158;
            --background: #0D0D0D;
            --surface: #1C1C1E;
            --surface-light: #2C2C2E;
            --text: #F5F5F7;
            --text-secondary: #98989D;
            --border: #38383A;
            --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-2: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-3: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Sora', sans-serif;
            background: var(--background);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .grain-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
            pointer-events: none;
            z-index: 9999;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 40px 20px;
            position: relative;
        }

        header {
            text-align: center;
            margin-bottom: 50px;
            animation: fadeInDown 0.8s ease-out;
        }

        h1 {
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f5576c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
            letter-spacing: -2px;
        }

        .subtitle {
            font-family: 'Space Mono', monospace;
            color: var(--text-secondary);
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 3px;
        }

        .progress-container {
            background: var(--surface);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid var(--border);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--surface-light);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-1);
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            font-family: 'Space Mono', monospace;
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .progress-steps .step {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .progress-steps .step.active {
            color: var(--primary);
            font-weight: 700;
        }

        .form-section {
            background: var(--surface);
            border-radius: 24px;
            padding: 35px;
            margin-bottom: 30px;
            border: 1px solid var(--border);
            animation: fadeInUp 0.8s ease-out;
            display: none;
        }

        .form-section.active {
            display: block;
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .section-icon {
            width: 40px;
            height: 40px;
            background: var(--gradient-1);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
        }

        .section-description {
            color: var(--text-secondary);
            margin-bottom: 30px;
            font-size: 0.95rem;
        }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .input-group {
            margin-bottom: 0;
        }

        label {
            display: block;
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-family: 'Space Mono', monospace;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.75rem;
        }

        input[type="number"], select {
            width: 100%;
            padding: 15px 18px;
            background: var(--surface-light);
            border: 2px solid var(--border);
            border-radius: 12px;
            color: var(--text);
            font-size: 1rem;
            font-family: 'Sora', sans-serif;
            transition: all 0.3s ease;
            outline: none;
        }

        input[type="number"]:focus, select:focus {
            border-color: var(--primary);
            background: var(--background);
            box-shadow: 0 0 0 4px rgba(10, 132, 255, 0.1);
        }

        select {
            cursor: pointer;
        }

        .btn {
            padding: 18px 40px;
            background: var(--gradient-1);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            font-family: 'Sora', sans-serif;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            display: inline-block;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s ease, height 0.6s ease;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .btn span {
            position: relative;
            z-index: 1;
        }

        .btn-secondary {
            background: var(--surface-light);
            margin-right: 15px;
        }

        .btn-secondary:hover {
            box-shadow: 0 10px 30px rgba(255, 255, 255, 0.1);
        }

        .btn-group {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .result-card {
            background: var(--surface);
            border-radius: 24px;
            padding: 40px;
            border: 1px solid var(--border);
            animation: fadeInUp 0.8s ease-out;
            text-align: center;
            display: none;
        }

        .result-card.active {
            display: block;
        }

        .predicted-grade {
            font-size: 6rem;
            font-weight: 700;
            background: var(--gradient-2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
            margin: 30px 0 15px;
            animation: scaleIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .grade-label {
            font-family: 'Space Mono', monospace;
            color: var(--text-secondary);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 40px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }

        .stat-box {
            background: var(--surface-light);
            padding: 25px;
            border-radius: 16px;
            border: 1px solid var(--border);
            transition: transform 0.3s ease;
        }

        .stat-box:hover {
            transform: translateY(-5px);
        }

        .stat-label {
            font-family: 'Space Mono', monospace;
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
        }

        .recommendation {
            background: var(--surface-light);
            border-left: 4px solid var(--tertiary);
            padding: 25px;
            border-radius: 12px;
            margin-top: 30px;
            text-align: left;
        }

        .recommendation-title {
            font-weight: 600;
            color: var(--tertiary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1rem;
        }

        .recommendation-text {
            color: var(--text-secondary);
            line-height: 1.7;
            font-size: 0.95rem;
        }

        .hidden {
            display: none;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .feature-importance {
            margin-top: 40px;
            background: var(--surface-light);
            padding: 30px;
            border-radius: 16px;
            border: 1px solid var(--border);
        }

        .importance-title {
            font-family: 'Space Mono', monospace;
            font-size: 0.85rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 20px;
        }

        .importance-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .importance-label {
            flex: 0 0 150px;
            font-size: 0.85rem;
            color: var(--text);
        }

        .importance-bar-container {
            flex: 1;
            height: 8px;
            background: var(--surface);
            border-radius: 10px;
            overflow: hidden;
            margin: 0 15px;
        }

        .importance-bar {
            height: 100%;
            background: var(--gradient-3);
            border-radius: 10px;
            transition: width 1s ease;
        }

        .importance-value {
            flex: 0 0 50px;
            text-align: right;
            font-family: 'Space Mono', monospace;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
    </style>
</head>
<body>
    <div class="grain-overlay"></div>
    
    <div class="container">
        <header>
            <h1>Student Performance Predictor</h1>
            <p class="subtitle">AI-Powered Academic Analytics</p>
        </header>

        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div class="progress-steps">
                <div class="step active" id="step1">üìù Basic Info</div>
                <div class="step" id="step2">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family</div>
                <div class="step" id="step3">üìö Academic</div>
                <div class="step" id="step4">üéØ Lifestyle</div>
                <div class="step" id="step5">‚úÖ Results</div>
            </div>
        </div>

        <!-- Section 1: Basic Information -->
        <div class="form-section active" id="section1">
            <h2 class="section-title">
                <span class="section-icon">üìù</span>
                Basic Information
            </h2>
            <p class="section-description">Let's start with your basic details</p>
            
            <div class="input-grid">
                <div class="input-group">
                    <label>School</label>
                    <select id="school" required>
                        <option value="">Select School</option>
                        <option value="0">Gabriel Pereira (GP)</option>
                        <option value="1">Mousinho da Silveira (MS)</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Gender</label>
                    <select id="sex" required>
                        <option value="">Select Gender</option>
                        <option value="0">Female</option>
                        <option value="1">Male</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Age</label>
                    <input type="number" id="age" min="15" max="22" placeholder="15-22" required>
                </div>
                
                <div class="input-group">
                    <label>Address Type</label>
                    <select id="address" required>
                        <option value="">Select Address Type</option>
                        <option value="0">Rural</option>
                        <option value="1">Urban</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Travel Time to School</label>
                    <select id="traveltime" required>
                        <option value="">Select Travel Time</option>
                        <option value="1">< 15 min</option>
                        <option value="2">15-30 min</option>
                        <option value="3">30-60 min</option>
                        <option value="4">> 60 min</option>
                    </select>
                </div>
            </div>
            
            <div class="btn-group">
                <div></div>
                <button class="btn" onclick="nextSection(2)">
                    <span>Next ‚Üí</span>
                </button>
            </div>
        </div>

        <!-- Section 2: Family Information -->
        <div class="form-section" id="section2">
            <h2 class="section-title">
                <span class="section-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span>
                Family Information
            </h2>
            <p class="section-description">Tell us about your family background</p>
            
            <div class="input-grid">
                <div class="input-group">
                    <label>Family Size</label>
                    <select id="famsize" required>
                        <option value="">Select Family Size</option>
                        <option value="0">‚â§ 3 members</option>
                        <option value="1">> 3 members</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Parent Status</label>
                    <select id="Pstatus" required>
                        <option value="">Select Status</option>
                        <option value="0">Apart</option>
                        <option value="1">Together</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Mother's Education</label>
                    <select id="Medu" required>
                        <option value="">Select Education Level</option>
                        <option value="0">None</option>
                        <option value="1">Primary (4th grade)</option>
                        <option value="2">5th-9th grade</option>
                        <option value="3">Secondary</option>
                        <option value="4">Higher Education</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Father's Education</label>
                    <select id="Fedu" required>
                        <option value="">Select Education Level</option>
                        <option value="0">None</option>
                        <option value="1">Primary (4th grade)</option>
                        <option value="2">5th-9th grade</option>
                        <option value="3">Secondary</option>
                        <option value="4">Higher Education</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Mother's Job</label>
                    <select id="Mjob" required>
                        <option value="">Select Job</option>
                        <option value="0">At home</option>
                        <option value="1">Health care</option>
                        <option value="2">Other</option>
                        <option value="3">Services</option>
                        <option value="4">Teacher</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Father's Job</label>
                    <select id="Fjob" required>
                        <option value="">Select Job</option>
                        <option value="0">At home</option>
                        <option value="1">Health care</option>
                        <option value="2">Other</option>
                        <option value="3">Services</option>
                        <option value="4">Teacher</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Guardian</label>
                    <select id="guardian" required>
                        <option value="">Select Guardian</option>
                        <option value="0">Father</option>
                        <option value="1">Mother</option>
                        <option value="2">Other</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Family Relationship Quality</label>
                    <select id="famrel" required>
                        <option value="">Select Quality</option>
                        <option value="1">Very bad</option>
                        <option value="2">Bad</option>
                        <option value="3">Neutral</option>
                        <option value="4">Good</option>
                        <option value="5">Excellent</option>
                    </select>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="prevSection(1)">
                    <span>‚Üê Back</span>
                </button>
                <button class="btn" onclick="nextSection(3)">
                    <span>Next ‚Üí</span>
                </button>
            </div>
        </div>

        <!-- Section 3: Academic Information -->
        <div class="form-section" id="section3">
            <h2 class="section-title">
                <span class="section-icon">üìö</span>
                Academic Information
            </h2>
            <p class="section-description">Your academic background and support</p>
            
            <div class="input-grid">
                <div class="input-group">
                    <label>Reason for School Choice</label>
                    <select id="reason" required>
                        <option value="">Select Reason</option>
                        <option value="0">Close to home</option>
                        <option value="1">Course preference</option>
                        <option value="2">Other</option>
                        <option value="3">Reputation</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Study Time per Week</label>
                    <select id="studytime" required>
                        <option value="">Select Study Time</option>
                        <option value="1">< 2 hours</option>
                        <option value="2">2-5 hours</option>
                        <option value="3">5-10 hours</option>
                        <option value="4">> 10 hours</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Past Class Failures</label>
                    <select id="failures" required>
                        <option value="">Select Failures</option>
                        <option value="0">None</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3 or more</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Extra Educational Support</label>
                    <select id="schoolsup" required>
                        <option value="">Select</option>
                        <option value="0">No</option>
                        <option value="1">Yes</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Family Educational Support</label>
                    <select id="famsup" required>
                        <option value="">Select</option>
                        <option value="0">No</option>
                        <option value="1">Yes</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Extra Paid Classes</label>
                    <select id="paid" required>
                        <option value="">Select</option>
                        <option value="0">No</option>
                        <option value="1">Yes</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Extra-curricular Activities</label>
                    <select id="activities" required>
                        <option value="">Select</option>
                        <option value="0">No</option>
                        <option value="1">Yes</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Attended Nursery School</label>
                    <select id="nursery" required>
                        <option value="">Select</option>
                        <option value="0">No</option>
                        <option value="1">Yes</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Want Higher Education?</label>
                    <select id="higher" required>
                        <option value="">Select</option>
                        <option value="0">No</option>
                        <option value="1">Yes</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Internet at Home?</label>
                    <select id="internet" required>
                        <option value="">Select</option>
                        <option value="0">No</option>
                        <option value="1">Yes</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Absences</label>
                    <input type="number" id="absences" min="0" max="93" placeholder="0-93" required>
                </div>
                
                <div class="input-group">
                    <label>First Period Grade (G1)</label>
                    <input type="number" id="G1" min="0" max="20" placeholder="0-20" required>
                </div>
                
                <div class="input-group">
                    <label>Second Period Grade (G2)</label>
                    <input type="number" id="G2" min="0" max="20" placeholder="0-20" required>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="prevSection(2)">
                    <span>‚Üê Back</span>
                </button>
                <button class="btn" onclick="nextSection(4)">
                    <span>Next ‚Üí</span>
                </button>
            </div>
        </div>

        <!-- Section 4: Lifestyle -->
        <div class="form-section" id="section4">
            <h2 class="section-title">
                <span class="section-icon">üéØ</span>
                Lifestyle & Social
            </h2>
            <p class="section-description">Your social life and habits</p>
            
            <div class="input-grid">
                <div class="input-group">
                    <label>In a Relationship?</label>
                    <select id="romantic" required>
                        <option value="">Select</option>
                        <option value="0">No</option>
                        <option value="1">Yes</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Free Time (1-5)</label>
                    <select id="freetime" required>
                        <option value="">Select Free Time</option>
                        <option value="1">Very low</option>
                        <option value="2">Low</option>
                        <option value="3">Medium</option>
                        <option value="4">High</option>
                        <option value="5">Very high</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Going Out with Friends</label>
                    <select id="goout" required>
                        <option value="">Select Frequency</option>
                        <option value="1">Very low</option>
                        <option value="2">Low</option>
                        <option value="3">Medium</option>
                        <option value="4">High</option>
                        <option value="5">Very high</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Workday Alcohol Consumption</label>
                    <select id="Dalc" required>
                        <option value="">Select Level</option>
                        <option value="1">Very low</option>
                        <option value="2">Low</option>
                        <option value="3">Medium</option>
                        <option value="4">High</option>
                        <option value="5">Very high</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Weekend Alcohol Consumption</label>
                    <select id="Walc" required>
                        <option value="">Select Level</option>
                        <option value="1">Very low</option>
                        <option value="2">Low</option>
                        <option value="3">Medium</option>
                        <option value="4">High</option>
                        <option value="5">Very high</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Health Status</label>
                    <select id="health" required>
                        <option value="">Select Health</option>
                        <option value="1">Very bad</option>
                        <option value="2">Bad</option>
                        <option value="3">Neutral</option>
                        <option value="4">Good</option>
                        <option value="5">Very good</option>
                    </select>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="prevSection(3)">
                    <span>‚Üê Back</span>
                </button>
                <button class="btn" onclick="predictPerformance()">
                    <span>üéØ Predict Grade</span>
                </button>
            </div>
        </div>

        <!-- Results Section -->
        <div class="result-card" id="results">
            <h2 class="section-title" style="justify-content: center;">
                <span class="section-icon">üéØ</span>
                Predicted Final Grade (G3)
            </h2>
            
            <div class="predicted-grade" id="predictedGrade">--</div>
            <div class="grade-label">Out of 20</div>

            <div class="stats-grid">
                <div class="stat-box">
                    <div class="stat-label">Performance Level</div>
                    <div class="stat-value" id="performanceLevel">--</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Previous Average</div>
                    <div class="stat-value" id="prevAverage">--</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Expected Change</div>
                    <div class="stat-value" id="expectedChange">--</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Pass Probability</div>
                    <div class="stat-value" id="passProb">--</div>
                </div>
            </div>

            <div class="recommendation">
                <div class="recommendation-title">
                    üí° Personalized Recommendations
                </div>
                <div class="recommendation-text" id="recommendationText">
                    Your personalized recommendations will appear here.
                </div>
            </div>

            <div class="feature-importance">
                <div class="importance-title">Key Factors Affecting Your Grade</div>
                <div id="importanceList"></div>
            </div>

            <div class="btn-group" style="justify-content: center; margin-top: 40px;">
                <button class="btn" onclick="resetForm()">
                    <span>üîÑ Try Another Prediction</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        let currentSection = 1;
        const totalSections = 4;

        function updateProgress() {
            const progress = (currentSection / totalSections) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            // Update step indicators
            for (let i = 1; i <= 5; i++) {
                const step = document.getElementById('step' + i);
                if (i <= currentSection) {
                    step.classList.add('active');
                } else {
                    step.classList.remove('active');
                }
            }
        }

        function nextSection(section) {
            // Validate current section
            const currentForm = document.getElementById('section' + currentSection);
            const inputs = currentForm.querySelectorAll('input[required], select[required]');
            let isValid = true;
            
            inputs.forEach(input => {
                if (!input.value) {
                    isValid = false;
                    input.style.borderColor = 'var(--secondary)';
                } else {
                    input.style.borderColor = 'var(--border)';
                }
            });
            
            if (!isValid) {
                alert('Please fill in all required fields!');
                return;
            }
            
            // Hide current section
            document.getElementById('section' + currentSection).classList.remove('active');
            
            // Show next section
            currentSection = section;
            document.getElementById('section' + section).classList.add('active');
            
            updateProgress();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function prevSection(section) {
            document.getElementById('section' + currentSection).classList.remove('active');
            currentSection = section;
            document.getElementById('section' + section).classList.add('active');
            updateProgress();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function getFormData() {
            return {
                school: parseInt(document.getElementById('school').value),
                sex: parseInt(document.getElementById('sex').value),
                age: parseInt(document.getElementById('age').value),
                address: parseInt(document.getElementById('address').value),
                famsize: parseInt(document.getElementById('famsize').value),
                Pstatus: parseInt(document.getElementById('Pstatus').value),
                Medu: parseInt(document.getElementById('Medu').value),
                Fedu: parseInt(document.getElementById('Fedu').value),
                Mjob: parseInt(document.getElementById('Mjob').value),
                Fjob: parseInt(document.getElementById('Fjob').value),
                reason: parseInt(document.getElementById('reason').value),
                guardian: parseInt(document.getElementById('guardian').value),
                traveltime: parseInt(document.getElementById('traveltime').value),
                studytime: parseInt(document.getElementById('studytime').value),
                failures: parseInt(document.getElementById('failures').value),
                schoolsup: parseInt(document.getElementById('schoolsup').value),
                famsup: parseInt(document.getElementById('famsup').value),
                paid: parseInt(document.getElementById('paid').value),
                activities: parseInt(document.getElementById('activities').value),
                nursery: parseInt(document.getElementById('nursery').value),
                higher: parseInt(document.getElementById('higher').value),
                internet: parseInt(document.getElementById('internet').value),
                romantic: parseInt(document.getElementById('romantic').value),
                famrel: parseInt(document.getElementById('famrel').value),
                freetime: parseInt(document.getElementById('freetime').value),
                goout: parseInt(document.getElementById('goout').value),
                Dalc: parseInt(document.getElementById('Dalc').value),
                Walc: parseInt(document.getElementById('Walc').value),
                health: parseInt(document.getElementById('health').value),
                absences: parseInt(document.getElementById('absences').value),
                G1: parseInt(document.getElementById('G1').value),
                G2: parseInt(document.getElementById('G2').value)
            };
        }

        function predictPerformance() {
            const data = getFormData();
            
            // Validate all fields
            for (let key in data) {
                if (isNaN(data[key])) {
                    alert('Please fill in all fields correctly!');
                    return;
                }
            }
            
            // Simplified prediction algorithm (mimicking GradientBoostingRegressor behavior)
            // This is a simplified model - for production, you'd use your actual trained model
            let prediction = 0;
            
            // G1 and G2 are the strongest predictors (based on typical feature importance)
            prediction += data.G1 * 0.35;
            prediction += data.G2 * 0.45;
            
            // Study time positive impact
            prediction += data.studytime * 0.3;
            
            // Failures negative impact
            prediction -= data.failures * 1.2;
            
            // Absences negative impact
            prediction -= data.absences * 0.08;
            
            // Higher education aspiration positive impact
            prediction += data.higher * 0.8;
            
            // Family support
            prediction += (data.Medu + data.Fedu) * 0.15;
            prediction += data.famsup * 0.5;
            
            // Alcohol consumption negative impact
            prediction -= (data.Dalc + data.Walc) * 0.15;
            
            // Going out too much negative impact
            prediction -= data.goout * 0.2;
            
            // Health positive impact
            prediction += data.health * 0.1;
            
            // Extra support
            prediction += data.schoolsup * 0.3;
            prediction += data.paid * 0.2;
            
            // Internet access positive
            prediction += data.internet * 0.4;
            
            // Relationship can be distracting
            prediction -= data.romantic * 0.3;
            
            // Family relationship quality
            prediction += data.famrel * 0.15;
            
            // Ensure prediction is within valid range (0-20)
            prediction = Math.max(0, Math.min(20, prediction));
            
            displayResults(prediction, data);
        }

        function displayResults(prediction, data) {
            // Hide all sections
            for (let i = 1; i <= totalSections; i++) {
                document.getElementById('section' + i).classList.remove('active');
            }
            
            // Show results
            document.getElementById('results').classList.add('active');
            currentSection = 5;
            updateProgress();
            
            // Update predicted grade
            document.getElementById('predictedGrade').textContent = prediction.toFixed(1);
            
            // Calculate stats
            const prevAvg = (data.G1 + data.G2) / 2;
            const change = prediction - prevAvg;
            const passProb = prediction >= 10 ? Math.min(95, 60 + (prediction - 10) * 3) : Math.max(10, prediction * 5);
            
            let performanceLevel = '';
            if (prediction >= 16) performanceLevel = 'A+';
            else if (prediction >= 14) performanceLevel = 'A';
            else if (prediction >= 12) performanceLevel = 'B';
            else if (prediction >= 10) performanceLevel = 'C';
            else performanceLevel = 'Needs Improvement';
            
            document.getElementById('performanceLevel').textContent = performanceLevel;
            document.getElementById('prevAverage').textContent = prevAvg.toFixed(1);
            document.getElementById('expectedChange').textContent = (change >= 0 ? '+' : '') + change.toFixed(1);
            document.getElementById('passProb').textContent = passProb.toFixed(0) + '%';
            
            // Generate recommendations
            generateRecommendations(prediction, data);
            
            // Show feature importance
            showFeatureImportance(data);
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function generateRecommendations(prediction, data) {
            let recommendations = [];
            
            if (data.failures > 0) {
                recommendations.push("You have past failures. Consider seeking extra tutoring or study groups to strengthen weak areas.");
            }
            
            if (data.studytime < 3) {
                recommendations.push("Increasing your study time to at least 5-10 hours per week could significantly improve your performance.");
            }
            
            if (data.absences > 10) {
                recommendations.push("Your absence rate is concerning. Regular attendance is crucial for academic success.");
            }
            
            if (data.Dalc > 2 || data.Walc > 3) {
                recommendations.push("Alcohol consumption can negatively impact your studies. Consider reducing consumption to improve focus.");
            }
            
            if (data.goout > 3) {
                recommendations.push("While social life is important, excessive going out might affect your study time. Try to find balance.");
            }
            
            if (!data.famsup) {
                recommendations.push("Family support is valuable. Consider discussing your academic goals with your family.");
            }
            
            if (!data.schoolsup && prediction < 12) {
                recommendations.push("Extra educational support could help boost your performance. Talk to your school counselors.");
            }
            
            if (!data.internet) {
                recommendations.push("Internet access can provide valuable learning resources. Consider using school or library facilities.");
            }
            
            if (data.health < 3) {
                recommendations.push("Your health status affects learning. Ensure you're getting proper rest, nutrition, and exercise.");
            }
            
            if (prediction >= 14) {
                recommendations.push("Excellent work! Maintain your current study habits and consider helping peers who struggle.");
            } else if (prediction >= 10) {
                recommendations.push("You're on track to pass. Focus on consistency and addressing any weak subjects.");
            } else {
                recommendations.push("You need to significantly improve your study approach. Seek immediate help from teachers and counselors.");
            }
            
            document.getElementById('recommendationText').innerHTML = recommendations.map((rec, idx) => 
                `<p style="margin-bottom: ${idx < recommendations.length - 1 ? '12px' : '0'};">‚Ä¢ ${rec}</p>`
            ).join('');
        }

        function showFeatureImportance(data) {
            // Simulated feature importance (based on typical ML model)
            const importance = [
                { name: 'G2 Score', value: 45, actual: data.G2 },
                { name: 'G1 Score', value: 35, actual: data.G1 },
                { name: 'Study Time', value: 8, actual: data.studytime },
                { name: 'Failures', value: 5, actual: data.failures },
                { name: 'Absences', value: 4, actual: data.absences },
                { name: 'Higher Education Goal', value: 3, actual: data.higher }
            ];
            
            const container = document.getElementById('importanceList');
            container.innerHTML = importance.map(item => `
                <div class="importance-item">
                    <div class="importance-label">${item.name}</div>
                    <div class="importance-bar-container">
                        <div class="importance-bar" style="width: ${item.value}%"></div>
                    </div>
                    <div class="importance-value">${item.value}%</div>
                </div>
            `).join('');
        }

        function resetForm() {
            // Reset all form inputs
            document.querySelectorAll('input, select').forEach(input => {
                input.value = '';
            });
            
            // Go back to first section
            document.getElementById('results').classList.remove('active');
            currentSection = 1;
            document.getElementById('section1').classList.add('active');
            updateProgress();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Initialize
        updateProgress();
    </script>
</body>
</html>